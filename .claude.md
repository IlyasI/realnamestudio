# Real Name Studio - Claude Development Guide

## Project Overview

Real Name Studio is a software company building web applications and iOS apps. We focus on quality, testing, and rapid iteration.

---

## Development Philosophy

### Test-Driven Development (TDD)
- **ALWAYS write tests first** before implementing features
- **ALWAYS use Playwright** for end-to-end testing
- Tests should be written before any production code
- All new features require tests
- All bug fixes require tests to prevent regression

### Testing Standards

**Test Framework:** Playwright

**Test Coverage Requirements:**
- All user-facing features must have E2E tests
- Critical paths must have comprehensive test coverage
- Tests should be written from the user's perspective

**Test-First Workflow:**
1. Write failing test that describes the desired behavior
2. Run the test to confirm it fails
3. Write minimal code to make the test pass
4. Refactor while keeping tests green
5. Repeat

**Example Test Structure:**
```javascript
// tests/feature-name.spec.js
import { test, expect } from '@playwright/test';

test.describe('Feature Name', () => {
  test('should do something specific', async ({ page }) => {
    // Arrange
    await page.goto('/');

    // Act
    await page.click('[data-testid="button"]');

    // Assert
    await expect(page.locator('[data-testid="result"]')).toBeVisible();
  });
});
```

---

## Development Server URLs

**ALWAYS provide the local development URL** when starting or working on a project.

### Standard Development URLs:
- **Main site:** http://localhost:3000
- **NYC Sound:** http://localhost:3001
- **API server:** http://localhost:3005
- **Database (PostgreSQL):** localhost:5432

**After starting any dev server, ALWAYS:**
1. Confirm the URL where it's running
2. Provide a clickable link in the response
3. Mention if the browser should auto-open

**Example:**
```
‚úÖ Dev server running at: http://localhost:3000
‚úÖ API server running at: http://localhost:3005
```

---

## Project Structure

```
realnamestudio/
‚îú‚îÄ‚îÄ public/              # Static website files
‚îÇ   ‚îú‚îÄ‚îÄ index.html      # Main landing page
‚îÇ   ‚îî‚îÄ‚îÄ contact.html    # Contact page
‚îú‚îÄ‚îÄ tests/              # Playwright E2E tests
‚îÇ   ‚îî‚îÄ‚îÄ *.spec.js       # Test files
‚îú‚îÄ‚îÄ playwright.config.js # Playwright configuration
‚îî‚îÄ‚îÄ package.json        # Dependencies
```

---

## Development Workflow

### Starting a New Feature

1. **Write the test first:**
   ```bash
   # Create test file
   touch tests/new-feature.spec.js

   # Write failing test
   # (describe what the feature should do)
   ```

2. **Run tests to see them fail:**
   ```bash
   npx playwright test tests/new-feature.spec.js
   ```

3. **Implement the feature:**
   - Write minimal code to pass the test
   - Keep it simple and focused

4. **Run tests again:**
   ```bash
   npx playwright test
   ```

5. **Refactor if needed:**
   - Improve code quality
   - Keep tests passing

6. **Commit with tests:**
   ```bash
   git add tests/new-feature.spec.js src/new-feature.js
   git commit -m "Add new feature with tests"
   ```

### Fixing Bugs

1. **Write a failing test** that reproduces the bug
2. **Fix the bug** to make the test pass
3. **Ensure all tests pass**
4. **Commit fix with test**

---

## Code Quality Standards

### HTML/CSS
- Use semantic HTML5
- Mobile-first responsive design
- Accessible (ARIA labels, keyboard navigation)
- Test on mobile and desktop

### JavaScript
- Modern ES6+ syntax
- Clear, descriptive variable names
- Functions should do one thing well
- Avoid global variables
- Use async/await for async operations

### Testing
- Tests should be clear and readable
- One assertion per test (when possible)
- Use descriptive test names
- Avoid flaky tests (no arbitrary timeouts)

---

## Command Reference

### Testing Commands

```bash
# Run all tests
npx playwright test

# Run tests in headed mode (see browser)
npx playwright test --headed

# Run specific test file
npx playwright test tests/feature.spec.js

# Run tests in debug mode
npx playwright test --debug

# Generate test code (record interactions)
npx playwright codegen http://localhost:3000

# Show test report
npx playwright show-report
```

### Development Commands

```bash
# Start development server
npm run dev

# Start specific project servers
# (adjust based on package.json scripts)
npm run dev:main
npm run dev:sound
npm run dev:api

# Install dependencies
npm install

# Install Playwright browsers
npx playwright install
```

---

## Git Workflow

### Commit Message Format

```
<type>: <description>

[optional body]

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

**Types:**
- `feat:` New feature
- `fix:` Bug fix
- `test:` Adding or updating tests
- `refactor:` Code refactoring
- `docs:` Documentation changes
- `style:` CSS/styling changes
- `chore:` Maintenance tasks

### Branching Strategy

- `main` - Production-ready code
- `develop` - Integration branch (if needed)
- `feature/feature-name` - New features
- `fix/bug-description` - Bug fixes

---

## Playwright Configuration

### Test Configuration Highlights

- **Browsers:** Chromium, Firefox, WebKit (all tested)
- **Retries:** 2 retries on CI, 0 locally
- **Timeout:** 30 seconds per test
- **Screenshots:** On failure
- **Video:** On first retry
- **Trace:** On first retry

### Best Practices

1. **Use data-testid attributes:**
   ```html
   <button data-testid="submit-button">Submit</button>
   ```
   ```javascript
   await page.click('[data-testid="submit-button"]');
   ```

2. **Wait for elements properly:**
   ```javascript
   // Good
   await expect(page.locator('#result')).toBeVisible();

   // Avoid arbitrary waits
   // await page.waitForTimeout(1000); // ‚ùå
   ```

3. **Use page object models for complex flows:**
   ```javascript
   // tests/pages/LoginPage.js
   export class LoginPage {
     constructor(page) {
       this.page = page;
     }

     async login(username, password) {
       await this.page.fill('#username', username);
       await this.page.fill('#password', password);
       await this.page.click('#submit');
     }
   }
   ```

4. **Test isolation:**
   - Each test should be independent
   - Use beforeEach for setup
   - Don't rely on test execution order

---

## Project-Specific Notes

### NYC Sound Project
- Uses Leaflet for interactive maps
- PostgreSQL database for artist/venue data
- Node.js/Express backend
- Real-time event updates

### Main Site (realnamestudio.com)
- Static HTML/CSS/JS
- No build process required
- Focus on performance and animations
- Mobile-responsive design

---

## When Working with Claude Code

### Always Include:

1. **Dev server URLs** after starting servers
2. **Test results** after running tests
3. **File paths** when creating/modifying files
4. **Error messages** in full if something fails

### Workflow:

1. Discuss the feature/change
2. Write tests first (TDD)
3. Run tests to see them fail
4. Implement the feature
5. Run tests to see them pass
6. Provide dev URL for manual testing
7. Commit with tests

---

## Resources

- **Playwright Docs:** https://playwright.dev
- **Testing Best Practices:** https://playwright.dev/docs/best-practices
- **Y Combinator Startup School:** Required reading (see /required-reading repo)
- **Company Values:** Build fast, test thoroughly, iterate based on feedback

---

## Quality Checklist

Before considering a feature complete:

- [ ] Tests written and passing
- [ ] Works on mobile and desktop
- [ ] Accessible (keyboard navigation, screen readers)
- [ ] No console errors
- [ ] Dev URL provided and manually tested
- [ ] Code reviewed (if team member available)
- [ ] Git commit with descriptive message

---

**Remember:** Test first, build second. Always provide dev URLs. Quality over speed, but ship fast.
